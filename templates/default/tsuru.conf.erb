listen: "<%=@tsuru_server['listen_addr']%>:<%=@tsuru_server['listen_port']%>"
admin-listen: "<%=@tsuru_server['admin_listen_addr']%>:<%=@tsuru_server['admin_listen_port']%>"
host: <%=@tsuru_server['host']%>
debug: <%=@tsuru_server['debug']%>

<% if @tsuru_server['use-tls'] && @tsuru_server['tls-cert-file'] && @tsuru_server['tls-key-file'] %>
use-tls: true
tls-cert-file: <%=@tsuru_server['tls-cert-file']%>
tls-key-file: <%=@tsuru_server['tls-key-file']%>

<% end %>

database:
  url: <%=@tsuru_server['database']['url']%>
  name: <%=@tsuru_server['database']['name']%>

git:
  unit-repo: <%=@tsuru_server['git']['unit-repo']%>
  api-server: <%=@tsuru_server['git']['api-server']%>
  rw-host: <%=@tsuru_server['git']['rw-host']%>
  ro-host: <%=@tsuru_server['git']['ro-host']%>

admin-team: <%=@tsuru_server['admin-team']%>
auth:
  scheme: <%=@tsuru_server['auth']['scheme']%>
  user-registration: <%=@tsuru_server['auth']['user-registration']%>
  token-expire-days: <%=@tsuru_server['auth']['token-expire-days']%>
  hash-cost: <%=@tsuru_server['auth']['hash-cost']%>
  max-simultaneous-sessions: <%=@tsuru_server['auth']['max-simultaneous-sessions']%>
<% if @tsuru_server['auth']['scheme'] == 'oauth' %>
  oauth:
    client-id: <%=@tsuru_server['auth']['oauth']['client-id']%>
    client-secret: <%=@tsuru_server['auth']['oauth']['client-secret']%>
    scope: <%=@tsuru_server['auth']['oauth']['scope']%>
    auth-url: <%=@tsuru_server['auth']['oauth']['auth-url']%>
    token-url: <%=@tsuru_server['auth']['oauth']['token-url']%>
    info-url: <%=@tsuru_server['auth']['oauth']['info-url']%>
    collection: <%=@tsuru_server['auth']['oauth']['collection']%>
    callback-port: <%=@tsuru_server['auth']['oauth']['callback-port']%>
<% end %>

queue: <%=@tsuru_server['queue']%>
<% if @tsuru_server['queue'] == 'redis' %>
redis-queue:
  host: <%=@tsuru_server['redis-queue']['host']%>
  port: <%=@tsuru_server['redis-queue']['port']%>
  password: <%=@tsuru_server['redis-queue']['password']%>
  db: <%=@tsuru_server['redis-queue']['db']%>
<% elsif @tsuru_server['queue'] == 'beanstalkd' %>
queue-server: <%=@tsuru_server['queue-server']%>
<% end %>

provisioner: <%=@tsuru_server['provisioner']%>
<% if @tsuru_server['provisioner'] == 'docker' %>
docker:
  collection: <%=@tsuru_server['docker']['collection']%>
  repository-namespace: <%=@tsuru_server['docker']['repository-namespace']%>
  router: <%=@tsuru_server['docker']['router']%>
  deploy-cmd: <%=@tsuru_server['docker']['deploy-cmd']%>
  ssh-agent-port: <%=@tsuru_server['docker']['ssh-agent-port']%>
  segregate: <%=@tsuru_server['docker']['segregate']%>
  scheduler:
    redis-server: <%=@tsuru_server['docker']['scheduler']['redis-server']%>
    redis-prefix: <%=@tsuru_server['docker']['scheduler']['redis-prefix']%>
#     redis-password: 
  run-cmd:
    bin: <%=@tsuru_server['docker']['run-cmd']['bin']%>
    port: <%=@tsuru_server['docker']['run-cmd']['port']%>
  ssh:
    add-key-cmd: <%=@tsuru_server['docker']['ssh']['add-key-cmd']%>
    public-key: <%=@tsuru_server['docker']['ssh']['public-key']%>
    user: <%=@tsuru_server['docker']['ssh']['user']%>
    sshd-path: <%=@tsuru_server['docker']['ssh']['sshd-path']%>
  #registry: <%=@tsuru_server['docker']['registry']%> # no docs for this config
  servers:
<% @tsuru_server['docker']['servers'].each do |server| %>
    - <%=server%>
<% end %>
<% end %>
<% if @tsuru_server['router'] == 'hipache' %>
hipache:
  domain: <%=@tsuru_server['hipache']['domain']%>
<% end %>

quota:
  units-per-app: <%=@tsuru_server['quota']['units-per-app']%>
  apps-per-user: <%=@tsuru_server['quota']['apps-per-user']%>